{
  "entities": {
    "JobPosting": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "JobPosting",
      "type": "object",
      "description": "Represents a job posting on the platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the job posting."
        },
        "title": {
          "type": "string",
          "description": "Title of the job posting."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the job posting."
        },
        "company": {
          "type": "string",
          "description": "Name of the company offering the job."
        },
        "location": {
          "type": "string",
          "description": "Location of the job (e.g., city, state)."
        },
        "salary": {
          "type": "number",
          "description": "Salary offered for the job."
        },
        "postedDate": {
          "type": "string",
          "description": "Date when the job posting was created.",
          "format": "date-time"
        },
        "applicationDeadline": {
          "type": "string",
          "description": "Date by which applications must be submitted.",
          "format": "date-time"
        },
        "category": {
          "type": "string",
          "description": "Category of the job (e.g., engineering, marketing)."
        },
        "requirements": {
          "type": "string",
          "description": "Requirements (e.g., skills, experience) needed for the job."
        }
      },
      "required": [
        "id",
        "title",
        "description",
        "company",
        "location",
        "postedDate",
        "applicationDeadline",
        "category",
        "requirements"
      ]
    },
    "Internship": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Internship",
      "type": "object",
      "description": "Represents an internship opportunity.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the internship."
        },
        "title": {
          "type": "string",
          "description": "Title of the internship."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the internship."
        },
        "company": {
          "type": "string",
          "description": "Name of the company offering the internship."
        },
        "location": {
          "type": "string",
          "description": "Location of the internship."
        },
        "startDate": {
          "type": "string",
          "description": "Start date of the internship.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "End date of the internship.",
          "format": "date-time"
        },
        "applicationDeadline": {
          "type": "string",
          "description": "Date by which applications must be submitted.",
          "format": "date-time"
        },
        "stipend": {
          "type": "number",
          "description": "Stipend amount for the internship."
        },
        "requirements": {
          "type": "string",
          "description": "Requirements (e.g., skills, education) needed for the internship."
        }
      },
      "required": [
        "id",
        "title",
        "description",
        "company",
        "location",
        "startDate",
        "endDate",
        "applicationDeadline",
        "requirements"
      ]
    },
    "Course": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Course",
      "type": "object",
      "description": "Represents an online course offered on the platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the course."
        },
        "title": {
          "type": "string",
          "description": "Title of the course."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the course content."
        },
        "instructor": {
          "type": "string",
          "description": "Name of the course instructor."
        },
        "price": {
          "type": "number",
          "description": "Price of the course."
        },
        "duration": {
          "type": "string",
          "description": "Duration of the course (e.g., 4 weeks, 20 hours)."
        },
        "syllabus": {
          "type": "string",
          "description": "Detailed syllabus of the course content."
        },
        "previewVideoUrl": {
          "type": "string",
          "description": "URL of the course preview video.",
          "format": "uri"
        },
        "category": {
          "type": "string",
          "description": "Category of the course (e.g., Web Development, AI)."
        },
        "downloadableMaterials": {
          "type": "array",
          "description": "List of URLs for downloadable materials.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "title",
        "description",
        "instructor",
        "price",
        "duration",
        "syllabus",
        "category"
      ]
    },
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user profile on the platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user profile."
        },
        "firstName": {
          "type": "string",
          "description": "First name of the user."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the user."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user.",
          "format": "email"
        },
        "phoneNumber": {
          "type": "string",
          "description": "Phone number of the user."
        },
        "resumeUrl": {
          "type": "string",
          "description": "URL of the user's resume.",
          "format": "uri"
        },
        "profilePictureUrl": {
          "type": "string",
          "description": "URL of the user's profile picture.",
          "format": "uri"
        },
        "purchasedCourseIds": {
          "type": "array",
          "description": "References to Courses purchased by the user. (Relationship: User N:N Course)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email"
      ]
    },
    "Employee": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Employee",
      "type": "object",
      "description": "Represents an employee of the company.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the employee."
        },
        "firstName": {
          "type": "string",
          "description": "First name of the employee."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the employee."
        },
        "email": {
          "type": "string",
          "description": "Email address of the employee.",
          "format": "email"
        },
        "phoneNumber": {
          "type": "string",
          "description": "Phone number of the employee."
        },
        "department": {
          "type": "string",
          "description": "Department the employee belongs to."
        },
        "jobTitle": {
          "type": "string",
          "description": "Job title of the employee."
        },
        "salary": {
          "type": "number",
          "description": "Salary of the employee."
        },
        "tasks": {
          "type": "array",
          "description": "List of tasks assigned to the employee.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email",
        "department",
        "jobTitle",
        "salary"
      ]
    },
    "Application": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Application",
      "type": "object",
      "description": "Represents an application for a job or internship.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the application."
        },
        "userProfileId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N Application)"
        },
        "jobPostingId": {
          "type": "string",
          "description": "Reference to JobPosting. (Relationship: JobPosting 1:N Application). Null if applying to an Internship"
        },
        "internshipId": {
          "type": "string",
          "description": "Reference to Internship. (Relationship: Internship 1:N Application). Null if applying to a JobPosting"
        },
        "applicationDate": {
          "type": "string",
          "description": "Date when the application was submitted.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "Status of the application (e.g., pending, reviewed, accepted, rejected)."
        },
        "coverLetter": {
          "type": "string",
          "description": "Cover letter submitted with the application."
        }
      },
      "required": [
        "id",
        "userProfileId",
        "applicationDate",
        "status"
      ]
    },
    "ContactMessage": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ContactMessage",
      "type": "object",
      "description": "Represents a message submitted through the contact form.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the person sending the message."
        },
        "email": {
          "type": "string",
          "description": "Email address of the sender.",
          "format": "email"
        },
        "subject": {
          "type": "string",
          "description": "Subject of the message."
        },
        "message": {
          "type": "string",
          "description": "The content of the message."
        },
        "submittedAt": {
          "type": "string",
          "description": "Date when the message was submitted.",
          "format": "date-time"
        }
      },
      "required": ["name", "email", "subject", "message", "submittedAt"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/jobPostings/{jobPostingId}",
        "definition": {
          "entityName": "JobPosting",
          "schema": {
            "$ref": "#/backend/entities/JobPosting"
          },
          "description": "Stores job posting data. Open to the public for listing, but only admins can create, update, or delete. The {jobPostingId} is the unique ID of the job posting.",
          "params": [
            {
              "name": "jobPostingId",
              "description": "The unique ID of the job posting."
            }
          ]
        }
      },
      {
        "path": "/internships/{internshipId}",
        "definition": {
          "entityName": "Internship",
          "schema": {
            "$ref": "#/backend/entities/Internship"
          },
          "description": "Stores internship data. Open to the public for listing, but only admins can create, update, or delete. The {internshipId} is the unique ID of the internship.",
          "params": [
            {
              "name": "internshipId",
              "description": "The unique ID of the internship."
            }
          ]
        }
      },
      {
        "path": "/courses/{courseId}",
        "definition": {
          "entityName": "Course",
          "schema": {
            "$ref": "#/backend/entities/Course"
          },
          "description": "Stores course data. Open to the public for listing, but only admins can create, update, or delete. The {courseId} is the unique ID of the course.",
          "params": [
            {
              "name": "courseId",
              "description": "The unique ID of the course."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profile data. Only the user can read/write their own profile. The {userId} corresponds to the Firebase Auth UID.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Auth UID of the user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/applications/{applicationId}",
        "definition": {
          "entityName": "Application",
          "schema": {
            "$ref": "#/backend/entities/Application"
          },
          "description": "Stores applications submitted by a user.  Only the user can read/write their own applications. The {userId} corresponds to the Firebase Auth UID, and the {applicationId} is the unique ID of the application.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Auth UID of the user."
            },
            {
              "name": "applicationId",
              "description": "The unique ID of the application."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/purchasedCourses/{courseId}",
        "definition": {
          "entityName": "Course",
          "schema": {
            "$ref": "#/backend/entities/Course"
          },
          "description": "Stores references to courses purchased by a user. Only the user can read their purchased courses. The {userId} corresponds to the Firebase Auth UID, and the {courseId} is the unique ID of the course.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Auth UID of the user."
            },
            {
              "name": "courseId",
              "description": "The unique ID of the course."
            }
          ]
        }
      },
      {
        "path": "/employees/{employeeId}",
        "definition": {
          "entityName": "Employee",
          "schema": {
            "$ref": "#/backend/entities/Employee"
          },
          "description": "Stores employee data. Only admins can create, read, update, or delete. The {employeeId} is the unique ID of the employee.",
          "params": [
            {
              "name": "employeeId",
              "description": "The unique ID of the employee."
            }
          ]
        }
      },
      {
        "path": "/roles_admin/{userId}",
        "definition": {
          "entityName": "adminRole",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Documents in this collection grant admin privileges to the corresponding user ID. Existence of a document confers admin rights. The {userId} corresponds to the Firebase Auth UID.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Auth UID of the user."
            }
          ]
        }
      },
      {
        "path": "/contactMessages/{contactMessageId}",
        "definition": {
          "entityName": "ContactMessage",
          "schema": {
            "$ref": "#/backend/entities/ContactMessage"
          },
          "description": "Stores messages submitted through the contact form. Anyone can create, but only admins can read.",
          "params": [
            {
              "name": "contactMessageId",
              "description": "The unique ID of the contact message."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to support a luxury job and course platform while adhering to the principles of Authorization Independence, Structural Segregation, and Access Modeling. User profiles and related data are organized under `/users/{userId}` for private data. Job postings, internships, and courses are stored in separate root-level collections (`/jobPostings`, `/internships`, `/courses`) to facilitate easy querying and listing. Applications are stored as subcollections of user profiles (`/users/{userId}/applications/{applicationId}`) to maintain clear ownership. Purchased courses are modeled as a subcollection of the user profiles (`/users/{userId}/purchasedCourses/{courseId}`). Contact messages are stored in their own collection to allow public write access while restricting read access.\n\nAuthorization Independence is achieved by denormalizing relevant authorization data (e.g., user IDs, roles) into the documents where access control is required. For instance, while the platform does not implement any collaborative features needing this strategy, if it were to be extended to include collaborative course creation or job posting management, relevant membership roles would be denormalized into course or job posting documents.\n\nQAPs (Rules are not Filters) is supported by structuring the data to allow secure `list` operations. Segregating job postings, internships, and courses into their own collections ensures that rules can be applied at the collection level without needing to filter based on document content. Path-based ownership for user-related data and membership maps (if needed in future collaborative features) enable secure listing of user-owned or shared resources."
  }
}
